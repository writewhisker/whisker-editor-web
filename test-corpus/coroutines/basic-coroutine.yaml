name: "Basic coroutine"
description: "Test coroutine.create and coroutine.resume"
tags: [coroutines, basic]

wls: |
  function counter()
    for i = 1, 3 do
      coroutine.yield(i)
    end
    return "done"
  end

  co = coroutine.create(counter)
  result1 = coroutine.resume(co)
  result2 = coroutine.resume(co)
  result3 = coroutine.resume(co)

  status = coroutine.status(co)

assertions:
  - variable: status
    equals: "dead"
